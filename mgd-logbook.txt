#spell:ignore onclick jinja apikey bingint vw_sepcombined andrade inpe nginx getusermail passwordrecovery changepassword resetpassword
#spell:ignore desloga sepcombined especificacaosetor suporteusuariogrupo suporteusuarioelemento tmpl wtforms getuseremail getusermail requestemail
#spell:ignore venv ccedil atilde receivefile datetime saude uix unsync healthcheck
#spell:ignore Setorista sendgrid linux cnpq ajax mgmt SQLA sqla gmail


------------- Use of / in schema/SEP -------------
    Database
        ¬ª vw_ui_texts{ section: "sepsMgmt", item: "colMetaInfo" }


------------- TODOs -------------
----------------------------------
    sidekick:
        ¬ª log to file

    security:
        ¬ª real secKeyViolation for forms

    leftovers:
        ¬ª def __get_scm_menu_list() -> List[Dict]: in __init__.py

    db:
        ¬ª user_data_files
            - set elapsed time, no datetime
            - no column in_debug
        ¬ª db_error_mgmt
    ui:
        ¬ª wait... background in 5s

    cache:
        ¬ª \carranca\helpers\ui_db_texts_cache.py
        ¬ª ui_texts is a item has {0}, it will be saved rendered
          so it can only be used once. See
          helpers\ui_db_texts_helper.py_add_msg
        ¬ª ui_texts: ui_texts[UITextsKeys.Msg.error] stays fix

        ¬ª Dialog
            - ups_handler dependes of dialog.html.j2 (if it has error...)
        ¬ª Form
            - if is saving -> set flag not to leave
            - save form state, to enable/disable menu
            - if [OK] -> disable form buttons (double click)
        ¬ª Change logout alert to Canoa form
        ¬ª About -> display db version
        ¬ª ajax
        ¬ª Linux
            - check no x permission on run_validate Linux
        ¬ª DB
            - drop columns users.mgmt_batch_code, mgmt_sep_at, mgmt_sep_id
            - drop view vw_mgmt_user_sep & trigger
            - drop columns log_user_sep.sep_new, id_sep_old
            - SchemaSEP



-----------------------------------------------------------
  Logbook
  Atualizar vers√£o em app_constants.py
-----------------------------------------------------------

   	A user can not be disabled if it has a SEP, cannot be assigned a sep if is disabled




------- 2025 - December ----------
    - todo:
        Standardize grid-body.html.j2 height
        user_data_files. LOG
        Form do resultado do Submit sem icon_refresh
        O nome do arquivo baixado n√£o volto au normal
        DNLD_R -> DNLD_RReport
        make log file by user


2025-12-03 minor fixes  vŒ≤ 5.18
    - fix download PDF file (missing variable)
    - Len miniamo do Nome do Esquema √© 2 (requisi√ß√£o Pedro 1/12)


2025-12-02 Undo upgrade ag-grid vŒ≤ 5.17
    - Undo : Upgrade ag-grid cols v5.16c
        // rowSelection: { mode: 'singleRow', checkboxes: false },
        rowSelection: 'single',
        RecipientsListStr => renamed: RecipientsList
        cc_recipients re-activated

------- 2025 - November ----------
2025-11-27 Fix a typo in submit.py - v5.16c
    - The typo `Except e` in submit.py war introduced in:
      f7ea249 2025-11-08 --09 Gemini A v Œ≤ 5.06
    - dds the process name to the validation process log to
      facilitate debugging.

2025-11-27 Move local-storage outside git repo - v5.16b
    - Moved local-storage folder (API keys, tokens, etc.) one level up
    - Previously kept untracked via .gitignore, now outside repo entirely

2025-11-27 Adjustments is SMTP email vŒ≤ 5.16

2025-11-26 Upgrade ag-grid cols vŒ≤ 5.15
    - Upgrade ag-grid griOption to v32.2.1
    - Standardize datetime columns

2025-11-25--26 Review of Export tables and views vŒ≤ 5.14 DB v4.70
    - Review DB
        ¬ª user_data_files
        ¬ª vw_user_data_files
        ¬ª vw_export_data_files (old vw_udf_latest_file)
    - Refactor the involved DB models
    - Database version 4.70

2025-11-24 Fixes on DB updates from dv vŒ≤ 5.13d
    - data_validate's validator_version grow to > 8
         => TYPE varchar(16)
    - fix
        result_json_str =
            f"{_local_result(f"no data matched regex: [{stdout_result_pattern}]")}\n'std_out_str': [{std_out_str}]"

2025-11-24 Fixes on validate email vŒ≤ 5.13c

2025-11-24 Fix a sidekick.display bug vŒ≤ 5.13b

2025-11-24 Update data_validate launcher script run_validate.sh vŒ≤ 5.12
    - send sidekick print to log (improve debugging info)
    - Update local copy of (keep it with x attribute)
        ../canoa/run_validate.sh
      as backup in case it's accidentally lost from its working path
        ../data_tunnel/run_validate.sh


2025-11-23 adjust Linux launcher script rema.sh

2025-11-22--23 Issues #84, #85, #86 vŒ≤ 5.11
    - Upload svg fixed
    - &c&oacute; -> c√≥digo Fixed
    - Error msg in display doc updated
    - Jinja bug in password_reset_or_change.html.js fixed
    - New document file_structure.md for linux

2025-11-21--22 Issue #73 Œ≤ 5.10
    - gmail com SMTP ready
    - new gmail sender
      <Canoa.AdaptaBrasil> em gmail


2025-11-20 Issue #74 gmail Œ≤ 5.09
    - Issue #74 solved
    - gmail com SMTP
    - as SendGrid, Google API est√£o dispon√≠veis
      EMAIL_PROVIDER = EmailProvider.SMTP.value

2025-11-20 Issue #78
    - Issue #78 solved
    - Install package Flask-Mail
    - Start with SMTP mail
    - Remove Google-auth-* & -api

2025-11-19 Issue #78 solved & several sep fixes
    - Issue #78 solved
    - background image back to original
    - Fixes in sep_grid.py

2025-11-10 -- 16 Global Revision  v Œ≤ 5.07
    - Fixing the Gemini mess, Part B/B
    - Global Revision with Power User OK


2025-11-08 --09 Gemini A v Œ≤ 5.06
    - Fixing the Gemini mess, Part A/B
    - Remove leftover code, impacting display Menu performance:
        scm_menu = __get_scm_menu_list
    - Replace `ui_texts: Dict=  UiDbText` with `ui_db_texts: UIDbTexts`


2025-11-06--08  v Œ≤ 5.05
    Replace SendGrid with gMail
    New class UIDbTexts,


2025-10-27 -- 11-05 5.04
    Updated all Canoa modules, processes, and accompanying documentation.


------- 2025 - October----------
2025-10-22 -- 26 5.02
    carranca\private\grid_helper.py -> carranca\helpers\uiact_helper.py
    There is a confusion from old code (pk of the row | code ~ action) see \uiact_helper.py
    UI ACTions & response
    Saving schema layout (on the way)
    Problems with form's extension template (buttons repetes)


2025-10-17 -- 21 Œ≤ 5.01  [Published]
    - Prepared to go public (see launch.json)


2025-10-16  Œ≤ 5.00  canoa_stage (Linux ‚Äî Sommelier)
    - Forked repo: https://github.com/miguelGastelumendi/canoa
    - Provisioned staging service "canoa_stage" on Sommelier (Linux).
    - Purpose: run non-production feature validation, reproduce platform-specific bugs and validate DB migrations/deploys.
    - Implementation highlights:
        ¬∑ Branching: created develop/staging for staged changes.
        ¬∑ CI/CD: pipeline builds, runs lint/tests, and deploys containerized app to canoa_stage.
        ¬∑ Environment: staging uses a sanitized copy of production DB, separate storage, and staging-specific env vars.
        ¬∑ Feature flags: enable experimental flows without affecting production.
        ¬∑ Migrations: applied to staging schema only; verified rollback path.
        ¬∑ Observability: application logs (rotated), healthcheck endpoint and basic alerting integrated.
        ¬∑ Deployment safety: automatic rollback on failed deploys; immutable image tags.
    - Staging endpoint (placeholder): http://satelier.dev.br:45745/login


------- 2025 -September----------
---------------------------------
    - send emails when a schema manager is changed
    - salver v++ de DB


2025-09-20 -- 10-09  Œ≤ 5.00  to new *canoa_staging* in Linux Sommelier
    - git clone git@github.com:your-user/canoa.git canoa_staging


2025-09-19 4.83 7 export UI
    - todo:
    - Save Icon's Order
    - Make the Export form vertical scrollable

2025-09-18 4.82 6 export UI
    - Part 6
    - Avoid moving sep img to another sep
    - Correctly display Bar√¥metro icon
    - Start saving icons position


2025-09-16--17
    - Prepare Linux Server to upgrade data_validator
    - Try to fix a problem with the router is SAtelier


2025-09-11,15
    - part 5
    - Fix layout export UI


2025-09-08--10 4.81 4 export UI
    - part 4
    - allow to arrange seps
    - display grid with latest uploaded data


2025-09-01--04 4.80 3 export UI
    - part 3
    - show all schema and seps


2025-09-01--04 4.79 2 export UI
    - part 2 ()

2025-09-01--04 4.78 Start export UI
    - new view wv_sep_recent_file
      display info of the most recent user's sep file
    - Start Schema Sep's order User Interface
      smc_export : .py, .css, .js, .j2


------- 2025 - August -----------
---------------------------------

2025-08-27--29 Œ≤ 4.77 [Published]

2025-08-27--29 Œ≤ 4.76
    - Correger pontos levantados por Pedro na 27/08 (no zap)
    - Normalizar Menu, T√≠tulo e r√≥tulos dos formul√°rios
      usando (novo arquivo) carranca\Normas T√≠tulos e R√≥tulos.md
    - Revisar todos os formul√°rios, como usu√°rio padr√£o √© admin

2025-08-26 Œ≤ 4.75 [Published] Check all menu procedures
    - Check all menu procedures:
       ¬∑ Correct selected row in Schema Edit Grid
       ¬∑ Google Api may have a mismatch module (further stud, needed)
         google-api-python-client
       ¬∑ View vw_mgmt_email_sep 'lost' edit permission (?)
         granted again


2025-08-26 Œ≤ 4.74 Correct a export bug
    - \helpers\db_records\DBRecords.py[129, if (len(sqla_records) == 0)]


2025-08-26 Œ≤ 4.73 Edit 'Manager'
    - new labels in SEP edit.
       Esquemas -> Esquema
       Setor Estrat√©gico -> Nome
       T√≠tulo -> T√≠tulo (Aparecer√° embaixo do √≠cone, pode ter HTML)


2025-08-25 Œ≤ 4.72 Fix all Visual Code Python's 'problems'
    diagnostic messages


2025-08-20 -- 25 Œ≤ 4.71 [Published] DB Import demo
    - Create a py Dict from the imported json
    - Allow o save the Form/Dialog icon

2025-08-04 -- 19 Œ≤ 4.70 [Published] DB Export phase 1 (output screen)
    - Schemas & SEP export
    - Export Configuration (ExportProcessConfig)
    - scm_export.py


2025-08-01 Œ≤ 4.67 [Published] Schema Grid, new Column [Sep count (Visible/Total)]
    - Fix Schema grid's text bugs
    - Add a border to the Schema grid's color cell, to display the color
    - Add an 'error hint' when the schema's name is invalid


------- 2025 - July -------------
---------------------------------
2025-07-28--31 Œ≤ 4.66 Grid of Schemas: Edit ready
    - User interface SEP and Schema (ui_order) #60
    - Redo Schema table (it was a view from DB.Canoa, see Œ≤ 4.60) #41


2025-07-23--26 Œ≤ 4.66 Grid of Schemas to Edit & Delete v1 new columns ui_order
    - Start Grid of Schemas to Edit & Delete (as Schema -> Edi√ß√£o/Remo√ß√£o)
    - New columns & indexes schema.ui_order, sep.ui_order


2025-07-21--22 Œ≤ 4.65 [Published] New Visible attribute in SEP (#56)
    - SEP can be visible or not (DB v 4.51)
    - Start of a DEMO of Schema.content HTML check & highlighter

2025-07-18--19 Œ≤ 4.64 [Published] Improves in Schema edition inputs v3
    - Not allow to save with invalid color
    - When Key is pressed validate_data
    - Color left "button" show color, improved usability hints
    - White background for the SEP icon

2025-07-15--17 Œ≤ 4.63 Improves in Schema edition inputs v2
    - Color input toggles text/selector (text has clipboard paste)
    - TextArea alone in right column
    - Review strategy for deleting SEPs & Schemas


2025-07-14 Œ≤ 4.62 [Published] Improves in Schema edition inputs
    - Color
    - TextArea
    - str len
    - Schema's name restriction

2025-07-09--12 Œ≤ 4.61 [Published] Implemented Schema Insert & Edit
    - 07/11 First presentation
    - Initial tests for Schema insert/edit workflows.
    - TODO: name's Validations (see GitHub)


2025-07-07--08 Œ≤ 4.60, DBv 4.50 recreate views that depend on common.schema
    - Recreate canoa.vw_schema and dependencies:
        vw_mgmt_user_sep
        vw_mgmt_email_sep
        vw_mgmt_seps_user
        vw_user_data_files
        vw_scm_sep

2025-07-04--05 Œ≤ 4.52 [Published] Fix Sep's Icon upload [Published]
    - A bug \private\sep_icon.py:icon_refresh set new icons
      to the default SepIconMaker.none_file


2025-07-01--02 Œ≤ 4.51 New tables for Schema
    - Create new table for Scheme (canoa.schema)


------- 2025 - June -------------
---------------------------------
2025-06-26--28 Œ≤ 4.50 DBv 4.09 #45 [Setor Estrat√©gico]=> Edit/Insert (Published)
    - Fix bugs of: Menu [Setor Estrat√©gico] ready for testes Edit/Insert
    - #45 log (table, log_user_sep) ready for SEP Edit/Insert
    - DB version 4.00.0


2025-06-24--25 Œ≤ 4.29 Fix a bug in Chromium browsers
    - Fix a bug on Chromium, the onGridReady
        ```js
        const gridOptions = {
            // this event happens before the submit form is ready
            onGridReady: (params) => {
    - Change /!\. => ‚ö†Ô∏è
    - Options ‚ÑπÔ∏è, ‚ìò ‚úÖ, ‚ùå, üõë, üöß Roadwork in progress"


2025-06-24 Œ≤ 4.28 Set a default value for icon_file_name
    - SepIconConfig.get_icon_url


2025-06-24 Œ≤ 4.27 An unhandled error in ../private/routes.py
    - Variable `error` was not defined.


2025-06-24 Œ≤ 4.26 Set Linux background img in css
    - Set Linux's background img in css
      instead of Windows's background
    - Add carranca/static/sep_icons/ to .gitignore


2025-06-20,23 Œ≤ 4.25 #42 #46  Menu [Setor Estrat√©gico]
    - Adm:
        ‚ó¶ [Edi√ß√£o] ¬ª janela com a lista de todos os SEPs ¬ª alterar todos os atributos
        ‚ó¶ [Inser√ß√£o] ¬ª janela para cadastrar SEP

    - Usu√°rio:
        No menu aparecem os SEP que pode alterar ¬ª Nome, T√≠tulo e Imagem


2025-06-20,23 Œ≤ 4.25  Setor Estrat√©gico ¬ª Edi√ß√£o (admin + user) ready
    - Edi√ß√£o de SEP para admin pronto.


2025-06-09--19 Œ≤ 4.24  Sep grid [Edit]
    -  SEP Grid connected to Sep_edit


2025-06-07 Œ≤ 4.23  Sync git with note
    -  My note was unsync with workstation


2025-06-06 Œ≤ 4.22  Change Schema of SEP
    -  Start allowing power user to change Schema of SEP


2025-06-05 Œ≤ 4.21 Fix a bug when recreating icon files from DB
    - see SepIconConfig new class_property


2025-06-04 Œ≤ 4.20 Get the Manger's name of the row edit in the SEP Adm Grid
    - sep_new_edit:[sep_manager]


2025-06-02--03 Œ≤ 4.19 New Grid for SEP Admin (part 4/4a)
    - Include manager's name in Edit form when call from Grid (by Adm)
    - Return to grid after close the [x]`
    - TODO: select the row



------- 2025 - March -------------
----------------------------------
2025-05-30 Œ≤ 4.18 New Grid for SEP Admin (part 3/4)
    - Demo to Pedro:
        . Window & Menu name: ' ~Manuten√ß√£o~ "Edi√ß√£o de Setores Estrat√©gicos"
        . [Criar] remove
        . [Edit] Button calls standard Edit SEP window, after delete return to grid/
        . [Remove] is confirmed with type the name of the SEP before deleting.


2025-05-26--29 Œ≤ 4.17 New Grid for SEP Admin (part 2/4)
    - Ativar: Novo e Edi√ß√£o de SEP desde da janela
      ~Administration~"Manuten√ß√£o de Setores Estrat√©gicos


2025-05-22--24 Œ≤ 4.16 New Grid for SEP Admin (part 1/4)
    - Fix a problem with Windows server Remote Desktop
    - Fix a bug en warn message stuck in the form
      (see msg @pedro 23/05/2025)
    - New grid "Administration of SEPS"


2025-05-21 Œ≤ 4.15 UI improvements in the two grids
    - Deploy v Œ≤ 4.14
    - The first row of the grid is selected at the start.
    - The grid selection row retains the selection color if it loses focus.

2025-05-20--21 Œ≤ 4.14  = Published
    - sep_new_edit.py ready, edit + insert SEPs
    - TODO: Admin: edit any Sep

2025-05-16,18,19 Œ≤ 4.13
    - sep_new_edit.py:
      Resolved wtforms mutable render_kw

2025-05-12--15 Œ≤ 4.12 pre
    - sep_new_edit.py ready for tests

2025-05-12--15 Œ≤ 4.11 pre
    - Fix seps_mgmt module (seps_grid.py broke)
    - New folder: carranca/modules
      for SQLAlchemy
      private/py.py & public.py uses same SQLABaseTable
    - Don't create submenus when not needed
      (so app_user.seps are not created)

2025-05-08--09 Œ≤ 4.10 issue: #38 + fix
    - Fix seps_mgmt module (seps_grid.py broke)

2025-05-07 Œ≤ 4.09 issues: #34, #39
    - issue #34 ready
    - issue #39 ready
    - Edit a user's strategic sectors (see menu):

2025-05-02,03,05,06 Œ≤ 4.08 issue #36 Ok, #34
    - issue #36 ready
    - issue #34 1/3


------- 2025 - April -------------
----------------------------------
2025-04-28--30 Œ≤ 4.07 issue #36
    - J√° solicita e muda o √≠cone acordo
    - Falta propagar a informa√ß√£o para o processo

2025-04-19,23--26  Œ≤ 4.06 DB v 3.71.0 issue #34
    1. Grid Management of SE Ready Part 3/4 2/4
    2. new and redone all views related to [user 1->n sep]
       new columns: sep.mgmt_users_id, sep.mgmt_ ...
       removed columns: users.mgmt_seep_id, users.mgmt_...
    3. app_user -> jinja_user, logged_user -> app_user

2025-04-14--17 Œ≤ 4.05 issue #34 Part 2/4
    2 Novo Grid, refactor sep_mgmt (db v)
    :
    3 Opera√ß√µes no grid
    4 Salvar Opera√ß√µes e enviar emails

2025-04-04,07--10 Œ≤ 4.04 issue #34 Part 1/4
    1 Nova view vw_mgmt_seps_user
    :
    2 Novo Grid
    3 Opera√ß√µes no grid
    4 Salvar Opera√ß√µes e enviar emails

2025-04-01--03 Œ≤ 4.03 issue #32 Part 3/3b
    fixes: Mobile size overlap
    - TODO:
         finish: __init__.py[_get_app_menu]

2025-04-01--03 Œ≤ 4.02 issue #32 Part 3/3a
    - TODO:
         finish: __init__.py[_get_app_menu]
         fix: Mobile size overlap

2025-03-31Œ≤ 4.01 issue #32 Part 2/3 u
    - HTML Layouts have been tested
    - Unused 'static' files have been removed
    - GitHub Languages  % before  % after
               Python       55.5     80.8
               Jinja         7.1     10.3
               JavaScript    6.0      3.5
               HTML          2.0      2.9
               CSS           0.9      1.3
               SCSS         27.7       --

2025-03-31Œ≤ 4.0 issue #32 Part 1/3
    - Substitute pixel.css by plain Bootstrap 5.3.3 (latest)

2025-03-26 Œ≤ 3.69 Published Linux
    - Minor fixes for Linux

2025-03-26 Œ≤ 3.68 Published
    - Minor fixes Windows

2025-03-26 Œ≤ 3.67 Published
    - received_files_mgmt for adm ready
    - Review of all processes.
    - Published

2025-03-22 Œ≤ 3.66 received_files_mgmt for adm v2
    - ready to test

2025-03-19---21 Œ≤ 3.65 received_files_mgmt for adm v1
    - Refactor received_files_mgmt.py for the adm user
    - New vw_user_data_files_count with users to manage
    - select number from db_version order by id desc limit 1
    - New user attribute (is_power) to test adm privileges while debugging:
         user.is_power =
            ((self.role_abbr == RolesAbbr.Suporte.value) and sidekick.debugging)
            or
            is_adm
    - Set Select users in received_files_mgmt.html

2025-03-19 Œ≤ 3.64 set me as the git user on this local repo

2025-03-18--19 Œ≤ 3.63 Review Validate Process files (split submit.py)

2025-03-17  Œ≤ 3.62 Review Validate Process files

2025-03-13--15 Œ≤ 3.61 new Exception user window
    - new: local_ui_texts.py (texts used when no DB connection, so no texts)
    - ready: ui_texts_helper.py
    - first: ups_handler.py page working
    - refactor: app_error_assistant.py (ex error_helper.py)
    - extension: flake8


2025-03-10--12 Œ≤ 3.60 revision off all the processes

2025-03-06--7,10 Planejamento bolsa/cnpq

2025-03-03--05 Œ≤ 3.59 new ups-handler
    - renew requirements.txt
    - ups handler for Exceptions/Errors
      new error template
      improve user messages,


------- 2025 - February ----------
----------------------------------

2025-02-26--28 Œ≤ 3.58 indexes & Fix a couple Bugs
    - new indexes in user_data_files for ReceivedFiles (vw_user_data_files)
    - received_files_mgmt.html }}} -> }}
    - { btn1, btn2 } -> [btn1, btn2 ]


2025-02-25 Œ≤ 3.57 Read data_validate json from stdout & save it
    - db_version = 3.60
    - user_data_files.validator_result(varChar(208)) new
    - user_data_files.report_ready_at -> g_report_ready_at
    - user_data_files.report_ready_at = obsolete
    - user_data_files.g_email_started_at -> h_email_started_at
    - report_ready_at.g_email_started_at = obsolete
    - save validator_result info (see submit.py:_store_report_result)

2025-02-24 Œ≤ 3.56 Start multiple SEP by user
    - remove SEP Icon from navigator
    - save received files with 'pdf' extension (not PDF/pdF/etc)'
    - review logged_user.sep (LocalProxy)
    - review ui_texts_helper.py msg_not_found

2025-02-21 Œ≤ 3.55 received_files_mgmt & sep_mgmt `merged`
    - received_files_mgmt & sep_mgmt now uses js_ui_constants
    - Create Users <-> Roles SQLAlchemy relation
    - logged_user now has role_id & role_abbr
    - Check if user role is valid (see login)
    - Fix Circular import
    - finished js_ui_constants to create grid forms
    - always add ui_date_format to ui_texts (see ui_texts_helper.py:get_section)
    - Rename tables, remove plural: UserDataFile (UserDataFiles), etc
    - --
    - DB: user rol changed to not null



2025-02-19 Œ≤ 3.54
    - Check if usr Role is recognized by Canoa (in RoleAbbr.py)
    - New properties for logged_user .role_abbr, .role_name & is_adm
    - get_section, new param ui_date_format (from )

2025-02-19 Œ≤ 3.54
    - new grid_helper.py (join ag-grid vars)
    - disable buttons of Gest√£o de Arquivos Enviados
    - retrieve files_rec
    - remove "Setorista" column, when logger_user is not adm
    - received_file_mgmt v1.0


2025-02-17--18 Œ≤ 3.53
    - Fix bugs & improvements in ReceivedFiles.get_user_records
    - ReceivedFiles.get_user_records, get a record by id
    - Fix bugs & improvements in DBRecords()
    - Remove ListOfDBRecords = []
    - Start disabled buttons of Gest√£o de Arquivos Enviados
    - Received_file_get() -> str | File: almost ready
    - First file download!


2025-02-14 Œ≤ 3.52
    - Improve  DBRecords, DBRecord
    - new app_constants.app_lang (default lang, for HTM & DB.ui_locales )
    - new column user.lang
    - received file mgmt grid display (download btn)
    - DB version 3.50


2025-02-11 Œ≤ 3.51
    - update see app_constants


2025-02-06,10 Œ≤ 3.50
    - dv: set --sector arg always sent. [Nenhum] if empty
    - new folder common
    - fix bug Gest√£o de SEP ()
    - fix bug : x= ListOfRecords = []


2025-02-03--05 Œ≤ 3.49
    - dv: fix run_validate.bat parameters (error when more than 9)
    - dv: new columns in user_data_files, read from data_validate's stdout
    - dv: set --sector arg only if user has sep
    - db: new columns, user_data_files.[report_errors,report_warns,report_tests,validator_version,db_version,exit_code]
    - fix py_helper.quote


------- 2025 - January -----------
----------------------------------

2025-01-27-31 Œ≤ 3.48
    - remove global config, add global sidekick
    - refactored  app_context_vars.py (request + app)
    - received_file_mgmt:received_files_fetch ready
    - new route /received_file_get/<file_name>


2025-01-20--25 Œ≤ 3.47 remove global app, use current_app

2025-01-20--25 Œ≤ 3.46
    - join UserFolders with ProcessData._User
    - define ListOfRecords <-> ListOfDict
    - define DBRecords to help database records (see private/models.py)
        ReceivedFiles first use
        MgmtUserSep refactored


2025-01-20--22 Œ≤ 3.45
    - Published in Windows & Linux Sever
    - create app_request_scoped_vars.py
    - Bug with logger_user class lifetime (now is request_scoped)
    - Bug when sending validation email (introduced by the new class RecipientsList)


2025-01-17 Œ≤ 3.44 [Arquivos Validados] Prepare records for ui grid

2025-01-14--16 Œ≤ 3.43 [Arquivos Validados] New `vw_user_data_files`, get json rows

2025-01-14 Œ≤ 3.42 Fix vers bug (3.4->3.40, 4.5->3.4)

2025-01-09 Œ≤ 3.5 Windows Server

2025-01-09 Œ≤ 3.4 Windows stable version


2025-01-09 Fixing file loss from last repair
    - tasks.json
    - email_helper.py
    - sendgrid_helper.py
    - sep_mgmt.py

    This commit was lost:
    -- For Windows & Linux -b
    2024-12-23 Œ≤ 3.39 fixes for Win & Linux
        - `launch.json` file that was committed with a secret,
        difficult do fix.
        - new file tasks.json (win)
        - new file with envvars .Canoa\..\..\prepareEnviron.bat
        - new class RecipientsList
        - new class RecipientsDic
        - del settings.json
        - new envvar EMAIL_REPORT_CC
        - ~8 minor fixes


2025-01-09 Fixes for git
    - `launch.json` file that was *locally* committed with a secret.
       Very hard work to fix.


------- 2024 - December ----------
----------------------------------

-- For Windows
2024-12-21 Œ≤ 3.38 fixes for Windows
    - Fix bug in Linux (works in Windows!) in carranca\templates\private\sep_mgmt.html.j2 {{gridSubmitID}}
    - Sending e-mail in Windows (a general fix to work with Linux also)
    - email_helper.py -> sendgrid_helper.py (sendgrid functions)
    - new file: email_helper.py  with generic email functions
    - new file: app_constants.py (finally a good solution)
    - new envvar EMAIL_REPORT_CC  (to hide emails)
    - envvars went to launch.json file (remove from Windows' envvars)
    - create class RecipientsListDic & type RecipientsList
    - 12 minor fixes

-- For Linux
2024-12-20 Œ≤ 3.37 fixes for Linux
    - Sending e-mail in Linux, not in Windows

-- For Linux
2024-12-19 Œ≤ 3.36 for linux-r.txt
    - Requirements for Linux
      Not the same versions as for Windows

-- Published in Win
2024-12-05 Œ≤ 3.35 args user, file & sector for data_validate
    - Now data_validate is called with new arguments
        user, file & sector for data_validate


-- Published in Win
2024-12-05 Œ≤ 3.34 fix Windows bug in Display.py
    - Fix a Windows pre v10 bug in Display.py

------- 2024 - November ----------
----------------------------------

-- Published in Win
2024-11-26 Œ≤ 3.33 fix form/doc
    - make form..htm.j2 and document.htm.j2
        have equivalent button
        TODO: make them the same button



-- Published in Win
2024-11-26 Œ≤ 3.32 several minor fixes
    - Fixed templates bug (g, About {{ app_version }})
    - Use same pallet form dialog/forms colors (based in sepia):
      https://www.colorhexa.com/704214
    - New columns users: password_failures, password_failed_at
    - Set users.email_confirmed after reset pw (if user received token => confirmed)
    - New static_route


2024-11-24..25 Œ≤ 3.31
    - Try to fix the 'big zip' file (se_saude_07_08)...
    - Start a 'on progress' msg for form submission


-- Published in Win
2024-11-20..23 Œ≤ 3.30 ----- mudou dezena!
    - [Gest√£o de SE] (para usu√°rios Adm) 100%
    - Debug geral.
    - Fix possible bug in db_helper.py Session() without close()
    - Obsolete views/functions (deleted form db)
       . sep__on_ins_upd_del.sql
       . sep_on_ins_upd_del.sql
       . generate_vw_sepcombined.sql
         (This procedure will create or recreate the view  `vw_sepcombined` in `canoa` schema from vw_schema.)


2024-11-19 Œ≤ 3.22 √çcone no grid 50%
    - New column user_data_files.sep_id
      . atualizada no processo de valida√ß√£o:
      . new process version "2024.10.22"

    - Ap√≥s mudar o svg do sep, apagar arquivo cache

    - Mostrar o "√≠cone" do SE 'ativo':
        . no menu principal
        . nos formul√°rios [Validar Dados], [Edi√ß√£o de SE]
        . no cabe√ßalho do grid de [Gest√£o de SE]


2024-11-18 Œ≤ 3.21
    - Implementations from today's meeting:
        > [Validar Dados]: ok
        > [Gest√£o de SEP] (para o Adm)
            o Bot√£o: "Gest√£o de SEPs" -> Gest√£o de SE
            o Titulo: "Gest√£o de SEP" -> Gest√£o de Setores Estrat√©gicos
        > [Edi√ß√£o de SE]
            o Label de Nome: "Identifica√ß√£o" -> Identifica√ß√£o (Esquema/SE)
    - sep_mgmt texts to DB


2024-11-16,17 Œ≤ 3.20
    - Sep Icon display on [Validar dados] & [Editar SE]

2024-11-14,15 Œ≤ 3.19
    - √çcones de Sep:
      . upload, save to db, save to hd, show as icon, defaults

2024-11-12,13 Œ≤ 3.18
    - Update image of table 'sep'

2024-11-12,13 Œ≤ 3.17
    - Update table 'sep' (image not ready)
    - New add_msg_fatal
    - Image is svg

2024-11-09 Œ≤ 3.16 All requests made during the demo, done ;-)
    - Significantly improve custom database exceptions
       see py_helper.try_get_mgd_msg
    - Trigger `vw_mgmt_user_sep__on_upd` ready
    - Tests performed
    - e-mail texts updated (estar√° -> est√°)

2024-11-08 Œ≤ 3.15 After demonstrating the app to the team (step1)
    - Display scheme/sep on grid
    - Redo db helpers views to scheme/sep
    - Adapt Trigger to scheme/sep

2024-11-07 Œ≤ 3.14
    - Log process to file
    - Database v5, enters correction fase
    - sep_mgmt v5, enters correction fase
    - sep_edit v1, displays form, DB ready


2024-11-06 Œ≤ 3.13
    - Database v4,
        To assist sending email:
        . new view vw_mgmt_email_sep
        . new cols in log_user_sep
    - sep_mgmt v4

2024-11-05 Œ≤ 3.12
    - Database v3, sep + log  new columns, uix's, search_name -> name_lower
    - sep_mgmt v3


2024-11-01, 04 Œ≤ 3.11
    - profile_mgmt -> sep_mgmt
    - sep_mgmt v2
    - sep_mgmt has info
    - navigation.html -> menu.html
    - TODO return de error (com os dados do grid) e msg de ok

------- 2024 - October -----------
----------------------------------

2024-10-31 Œ≤ 3.10
    - Grid, save SEP 100, Log 100%

2024-10-28,31 Œ≤ 3.9 a, b
    - Grid, save SEP 90%, db ready, remove config.SERVER_NAME

2024-10-25 Œ≤ 3.8
    - Grid, save SEP 60%

2024-10-24 Œ≤ 3.7
    - Grid, save SEP 20%

2024-10-24 Œ≤ 3.6
    - Grid, add/edit SEP 90%

2024-10-23 Œ≤ 3.5
    - Grid, add/edit SEP 60%, sidekick

2024-10-22 Œ≤ 3.4
    - Grid, Demo db

2024-10-21 Œ≤ 3.3
    - Grid, Demo ajustes

2024-10-21 Œ≤ 3.2
    - Grid, new requirements.txt

2024-10-21 Œ≤ 3.1
    - Grid, Demo o √∫nico que funciona :‚Äî(

2024-10-21 Œ≤ 3.0
    - Grid, Demo

2024-10-20 Œ≤ 2.40
    - Grid, part 2

2024-10-18--19 Œ≤ 2.39
    - Grid, part 1

2024-10-17 Œ≤ 2.38
    - Utilizar Flask.g

2024-10-14--16 Œ≤ 2.37
    - process version 2024.10.16
    - n checks of repeated submissions

2024-10-12 Œ≤ 2.36
    - process revised because a bug in a second successive submission
    - process version 2024.10.12_b

2024-10-10,11 Œ≤ 2.35
    - profile demo
    - check se_saude_07_08.zip

2024-10-09 Œ≤ 2.34
    - new profile_management route

2024-10-08 Œ≤ 2.33
    - new Session per model

2024-10-07 Œ≤ 2.32
    - app is running, all menu items are working
     local file is validated.

2024-10-05 Œ≤ 2.31
    - app is running

2024-10-04 Œ≤ 2.30
    - app is still not fully running :‚Äì(
        app is running, but seems that has no routes.
    - main.py is Application Factory Pattern
        but never is __main__

2024-10-04 Œ≤ 2.29
    - app is still not running :‚Äì(
    - create_app is defines in __init__.py is only
    - create_app calls 'igniter'

2024-10-01--04 Œ≤ 2.28
    - app not running :‚Äì(
    - __init__.py now 'ignites' the starting class
    - Args new Class
    - the igniter.py is almost ready (all main.py)


------- 2024 - September ---------
----------------------------------

2024-09-30 Œ≤ 2.27
    - __init__.py is now create_app.py
    - main.py in now __init__.py (perhaps it will be divided in smaller pieces)
    - carranca is the main app package.


2024-09-29 Œ≤ 2.26
    - main.py in carranca folder
    - main.py correctly executed
    - Flask stops with: `No module named main`

2024-09-26 Œ≤ 2.25
    - Before moving main.py to carranca folder
      The project stop running. __name__ inside main.py is 'main'.


2024-09-26 Œ≤ 2.24
    - Ready for db-refactoring

2024-09-26 Œ≤ 2.23
    - move __init__.py [db] to shared.py
      config_receive_file.py -> config_validate_process.py

2024-09-26 Œ≤ 2.22
    - pre db-refactoring

2024-09-25 Œ≤ 2.22
    - Rename StorageInfo to ProcessData (si -> pd)
    - Rename folder carranca\private\upload_files to validate_process


2024-09-25 Œ≤ 2.21
    - check file_origin field
    - Problem when Inserting a row in UserDataFiles after a connection
      timeout, crate UserDataFiles.insert()
    - Add pool_pre_ping=True tu connection


2024-09-24 Œ≤ 2.20
    - Fix typo in run_validate.bat
    - Some comments & fixes in dwnLd_goo_helper.py
      for GoogleDrive download (My gd credential vanished)


--------- 2024 - August ----------
----------------------------------

2024-08-24 Œ≤ 2.19
    - Fix msg_error in submit.py

2024-08-24 Œ≤ 2.18
    - Display app version on startup

2024-08-24 Œ≤ 2.17
    - issues:
        a. Erros in check.py generates an internal error.
        1. Check upload/email.py html body, email_sent_at
        9. Events Log
        E. Use a variable ~for~ to accept .zip
        F. Change cargo.report_ready_at to validate_end_at
    - Now process downloaded and uploaded files
    - DB table [user_data_files] new columns datetime for each module

2024-08-23 Œ≤ 2.16
    - uploadFile -> receivefile
    - upload_file -> receive_file
    - Adjusting `process` to both type of files,
      download aware:
        - check.py


2024-08-22 Œ≤ 2.15
    - Download load public compressed files from Google Drive 100%
    - Prepare UploadFile Form to include Google Drive link
    - Upload Form validation for url or local file

2024-08-19 Œ≤ 2.14
    - Fixed branch issue (a 'new branch 'appeared in git,
        my work was divided into ann lost some code and
        time to merge it correctly)

2024-08-14 Œ≤ 2.13
    - Download public files from url
    - Download load public files (*not* compressed) from Google Drive
    - Download load public compressed files from Google Drive 80%


----------- 2024 - July ----------
----------------------------------

2024-07-30 vŒ≤ 2.12
    - New  [About]  x
    - Google Drive download 1
    - Google Drive download 2  x

2024-07-30 vŒ≤ 2.11
    - issues:
        G run.bat goes to data_tunnel
    - Remove ellipses from  [Especifica&ccedil;&atilde;o]


2024-07-30 vŒ≤ 2.10
    - Bugs introduced on vŒ≤ 2.9:
        from file_helper import file_full_name_parse
        =>
        from .file_helper import file_full_name_parse

2024-07-30 vŒ≤ 2.9
    - Submit module now sends Validator path to script
    - Updated and renamed scripts: run_validate.bat|sh (previously run.bat|sh)
    - From now, run_validate.bat|sh goes to `data_tunnel`
    - Original run_validate.bat|sh is one level up of `carranca` folder:
        if data_tunnel copy it's missing or old, the original one
        is used to copy/update
    - Start using `app_log` during process
    - Login name can be Name or Email (adjusted input max len)
    - The filename can be changed by `secure_filename` (see check.py)

2024-07-26 vŒ≤ 2.8 (to test, use last version July/23)
    - Several adjustments to call data_validate from the common folder

2024-07-25 vŒ≤ 2.7
    - Set the [Especifica√ß√£o] button as an external link in new tab
    - Set some hints on the navigation buttons for evaluation purposes [<a title='hint']
    - Set correctly the accept attribute on the input tag of Upload file (accept = .zip)
    - Define the possibility of adding several CCs to the e-mail

2024-07-22 vŒ≤ 2.6
    - Change text in ui.items[uploadFileSuccess]
    - Add [Especifica√ß√£o] button in navigation.html
    - New shared.py (reorder main.py)
    - Fix a bug on html_helper.py
    - Finalize display_html.py

2024-07-07 vŒ≤ 2.5
    Fix ?

2024-07-05 vŒ≤ 2.4
    Fix typo in last push

2024-07-05 vŒ≤ 2.3
    DV flag `--no-spellchecker` when is Windows

--no-spellchecker
2024-07-05 vŒ≤ 2.2
    Fix bug Call func instead of const

2024-07-04 vŒ≤ 2.1
    Fix bug when empty ('') argument sent to data_validate
    New user_data_files.from_os char(1) column (W/L)
    New background img for Windows `canoa_fundo-w.jpeg`

2024-07-04 vŒ≤ 2.0
    Prepared to run all modules (in Linux)

2024-07-04 vŒ≤ 1.9
    New bash scripts:
        - rema.sh     starts `rowing` the Canoe
        - test_dv.sh  runs a simulation of a Canoa call to data_validate
        - run.sh      script call by data_validate

2024-07-04 vŒ≤ 1.8
    1. Fixing bug, file:upload_file.py
        [get_user_receipt(file_ticket)] was before [if error_code == 0:]
        so [file_ticket] can be empty (error_code != 0) that will generate
        an error in
         ticket.split.split in file:user_helper.py

2024-07.01 v Œ≤ 1.7d
    1. Windows -> Linux

2024-07.01 v Œ≤ 1.7c
    1. Linux -> Windows

2024-07.01 v Œ≤ 1.7b
    1. Fixed for Windows, sending to Linux to check

2024-07.01 v Œ≤ 1.7
    1. Fixed for Linux, sending to Windows to check

----------- 2024 - June ----------
----------------------------------

2024-06-22 v Œ≤ 1.6
    1.  Check all wtforms validators (create app_config.LenFor.name & pw)
          RegisterForm had no min size for `name` but LoginForm did.
          So a user who registered with a short (<6) name couldn't login.
    2.  Create wtf_helper.py and jinja_helper.py: class LenFor
    3.  Register ui_text `invalidPassword` & `InvalidUserName` :-O
    4.  Following the recommendation from
            https://wtforms.readthedocs.io/en/master/validators/#wtforms.validators.DataRequired

            wtforms's DataRequired() -> InputRequired()
            _Unless a very specific reason exists, we recommend using the InputRequired instead._
    5.  As far as I check, EqualTo runs on the server. Using mine.
           https://wtforms.readthedocs.io/en/3.0.x/validators/?highlight=equa#wtforms.validators.EqualTo:
    6.  Start process_pre_templates (New jinja_helper.py)
    7.  Document what I learn todas documenting_python_code.md


2024-06-19 v Œ≤ 1.5
    1. Fixed circular import on server and other small bugs

2024-06-19 v Œ≤ 1.4
    1. Fixing circular import on server

2024-06-19 v Œ≤ 1.3
    1. Fixing circular import on server

2024-06-19 v Œ≤ 1.2
    1. Fixing circular import on server

2024-06-19 v Œ≤ 1.1
    1. Fixing circular import on server

2024-06-17..19 v Œ≤ 1.0
    1. Check every `db.query` to see if returns records before .first()
    2. Rollback all session.commit() on every Exception
    3. Standardize vars/defs (almost all)
    4. Send email with html
    5. do_password_reset task_code,

2024-06-14,15 v Œ±51b
    1. Continuar user_receipt e ajustes

2024-06-13,14 v Œ±51a
    1. New ticket size (user_receipt)
    2. new texts for upload

2024-06-07 v Œ±50
    1. Jinja2's filter ready!
    2. Fix HTML documents display
    3. New About()

2024-06-07 v Œ±49
    1. If data_validate 'fails' but produces a report,
       record the error in user_data_files and continue.
    2. Create jinja2 Filter for common functions (see __init__.py)

2024-06-07 v Œ±49
    1. Print error msg if user registration fails (TODO: LOG)

2024-06-07 v Œ±48
    1. Fix the user registration process (Errors: defs, table, columns :-O)

2024-06-05 v Œ±47
    1. Fixes for the Win Server

2024-06-05 v Œ±46
    1. Send email with CC to @pedro-andrade-inpe when data_validate
       Test fails, recipient receive, but cc doesn't
    2. Published in Sommelier (SAtelier's Windows server)

2024-06-03..04 v Œ±45
    1. Send email with CC mgd (testing) when data_validate
    2. Confirm if run.bat exists
    3. New Cargo object ModulesConfig.py

----------- 2024 - May -----------
----------------------------------
2024-05-30 v Œ±44
    1. Fix several minor bugs on the authentication process html.j2 files
    2. Disable the submit button after it is pressed.
    3. use `<form action= {rout#} ..> instead of <button onclick = 'location.href = {route}....
       as should be for Flask apps

2024-05-28 v Œ±43
    1. Give default value of config only when empty !!

2024-05-28 v Œ±42
    1. Remove circular import

2024-05-28 v Œ±41
    1. requirements.txt minimized

2024-05-27 v Œ±40
    1. Vers√£o beta6 do validador
    2. Ajustes data_validate para que rode sem problemas:
        2.1 text_html, substituir asc > 126 por &entity;
            para evitar erro em:
            save_html_pdf_report: template = self.env.get_template(self.template_name)
        2.2 text_html tem um script sem fechas </script>
            para evitar erro em:
            gera_pdf
        2.3 `coverage` n√£o est√° no requirements.txt
    3. Ajustes para o servidor (circular import)


2024-05-25 v Œ±39
    1. Ajustes para o servidor

2024-05-22--25 v Œ±38
    1. Modularizar o processo de valida√ß√£o, ver .private/upload_file/process.py
    2. Vers√£o beta5 do validador

2024-05-18--22 v Œ±37 (a)
    1. run.py renomeado a main.py
    2. main.py atualizado
    3. Valida√ß√£o: nova estrutura do folder compartilhado:
        <top-folder>
            |- canoa
            |   |‚Äî carranca
            |   |‚Äî user_files
            |   |  |‚Äî uploaded
            |   |  |‚Äî downloaded
            |   |
            |   :
            |
            |‚Äî data_validate
            |   |
            |   + run.bat
            |   |
            |
            |‚Äî data_tunnel
                |‚Äî <user_1>
                |   |‚Äî data
                |   |‚Äî report
                |‚Äî <user_2>
                :

2024-05-18--22 v Œ±37
    1. run.py renomeado a main.py
    2. main.py atualizado
    3. Valida√ß√£o: nova estrutura do folder compartilhado:
        <top-folder>
            |- canoa
            |   |- carranca
            |   |- uploaded_files
            |   :
            |
            |- data_validate
            |   :
            |
            |- data_tunnel
                |- <user_1>
                |   |- data
                |   |- report
                |- <user_2>
                :

2024-05-18--21 v Œ±36
    1. Config.py modernizado,
        a. DebugConfig
        b. ProductionConfig
    2. M√≥dulos atualizados q nova estrutura

2024-05-16--18 v Œ±35
    1. Typo in base.html.j2

2024-05-16--18 v Œ±34
    1. Fim refatora√ß√£o de (carranca\authentication e carranca\home) a
        > private: usu√°rio tem que estar logado
        > public: n√£o logado
        > templates.private
    2. Blueprint refeito, ver
        *.routes.py
        helpers\route.py bp_public, bp_private
        .__init__.py.register_blueprints
    3. Pasta scripts -> helpers

2024-05-09--16 v Œ±33
    1. Vers√£o beta4 do validador
    2. Refatorar pastas carranca\authentication e carranca\home
        > private: usu√°rio tem que estar logado
        > public: n√£o logado
    3. Banco de Dados renomeado a `canoa`
    4. Blueprint refeito (ver bp_public, bp_private)

2024-05-09 v Œ±32
    1. Vers√£o beta3 do validador

2024-05-09 v Œ±31
    1. Vers√£o beta2 do validador

2024-05-09 v Œ±30
    1. Vers√£o beta do validador

2024-05-08 v Œ±29
    1. Several improvements on UploadFile

2024-05-07 v Œ±28
    1. Teste sem path.txt
    2. Undo apikey

2024-05-06 v Œ±27
    1. Refactoring dos nomes de block em flask de base.html
    2. Primer de upload com valida√ß√£o
    3. Falta limpar aquivos, email e testes

2024-05-06 v Œ±26
    1.Environ vars must start with CANOA_
    2 Forms fixups

2024-05-03 v Œ±25
    1. Renomeado  `apps` -> carranca (font-end da canoa)
    2. Bug no Upload solucionado (somente DB)
       Como zlib.crc32 -> int  (32b)  na tabela e fiz a coluna file_crc::int4
       Mas, na realdade (desde a vers√£o 3), √© um uint.
       Ja que em Postgres n√£o tem tipo uint mudei o tipo de dado da coluna: file_crc::bingint
    3. Communication module with 'validate_data' started

2024-05-03 v Œ±24
    1. Renomeado Caatinga -> Canoa
    2. Nova imagem/ favicon


----------- 2024 - April ---------
----------------------------------
2024-04-29,30 v a23
    # Upload File
        1. Criar pasta compartilhada entre Canoa e o validador:
            <root>/shared
        2. Compartilhar os scripts (que acho) necess√°rios para a comunica√ß√£o `Validador` e Canoa email
            <root>/shared/scripts
        3. Guardar os arquivo na especificada em
            <root>/shared/scripts/config.py
           Agora √©:
            <root>/shared/user_data/upload_files
        4. Persistir os dados do arruivo na tabela user_data_files
        5. Criar view com os dados necess√°rios para enviar e-mail com
           o resultado da valida√ß√£o.
    # Mudar texto de Caatinga a Canoa


2024-04-29,30 v a22
    # Criar Classe
         ./apps/caatinga/config.py
         com paths a lugares de upload

2024-04-27,29 v a21
    # Upload File
        1. Formul√°rio, pronto
        2. Recep√ß√£o, ok
2024-04-16..19,23--26
    # Refatora√ß√£o do DB
        1. As tabelas foram traduzidas ao ingles.
        2. Cria√ß√£o de √≠ndices e relacionamentos.
        3. Modernizar tabela `users`.
    # Novas Tabelas e Views
        1. Criar tabela `roles`.
        2. Criar tabela 'sepcombined_user` que relaciona os sep (vw_sepcombined) com o usu√°rios (users).
        3. Cria√ß√£o de Views a partir de common.schema:
            a. vw_schema -> common.schema
            b. vw_sepcombined (junta as tabelas `sep` de cada db.schema listado na tabela common.schema)
               A view √© criada por generate_vw_sepcombined()
            c. vw_ui_texts junta as tabelas com os textos do User Interface (ui_*) para ser usada pelo app
    # Novo Formul√°rio
        1. Inicio do Upload File


2024-04-15
    # Novos documentos: 'Termo de Uso', 'Pol√≠tica de Privacidade' e 'Bem-vindo ao aplicativo Caatinga'
        1. Exibir os documentos
        2. Ajustes v√°rios para melhor exibi√ß√£o
        3. Remover bug que acontece quando o usu√°rio esta logado e abre a pagina de login.

    #  login->login, 'Pol√≠tica de Privacidade' texto completo, 'memoria' para login e register
        1. N√£o da erro quando o usu√°rio logado tenta logar e novo.
        2. Faltou um segmento do texto Pol√≠tica de Privacidade'
        3. Se na tela de login ou register vai para o documento, perde o j√° escrito.
        4. N√£o enviar e-mail ANTES de registrar ao usu√°rio (processo proposto por mgd, negado)


2024-04-09 -- 12
      # Exibir HTML pronto
        1. Criar um alias para el documento HTML derivado do t√≠tulo, eg  `especificacaosetor`
        2. Salvar na tabela textos_grupo.grupo <- alias (antes: suporteusuariogrupo.nome)
        3. Salvar o documento em textos_item.nome HTML em partes: (antes: suporteusuarioelemento.tag)
            - documento.body -> body
            - document.style -> style
            - t√≠tulo do documento -> pageTitle (do tab browser), formTitle (do formul√°rio)
            - lista de imagens (separadas por ,) que est√£o na tabela texto_item -> images
            - imagem 1 encode64 -> imagem1.png
            * se salvar as imagens diretamente no diret√≥rio, `images` pode ser '',
            * O diret√≥rio √© \static\docs\{alias}\img\*
            * home/routes.py [docs] cuida de:
                - Recreate images from DB when needed and are available
                - Updates url of img tag for the folder in the HTML

2024-04-08
      # Inicio de Imagens para HTML

2024-04-05
      ¬ª Backup do db
      ¬ª Planejamento de imagens para HTML + HTMLs an√¥nimo/logado

2024-04-04
      # Di√°logos e Formul√°rios prontos com cores novas

2024-04-03
      #Atualiza√ß√£o de git
      ¬ª Remember-me Cookie
      ¬ª vw_textos (atualizada)
      ¬ª caatinga.css

2024-04-02
      #Formul√°rio das Contas de Usu√°rio revis√£o 2, novo background
      #Display de documentos HTML (comparte dialog.tmpl com os formul√°rios)

2024-04-01
      #Formul√°rios funcionando, configur√°veis

---------- 2024 - March ----------
----------------------------------
2024-03-28
      #Adaptar formul√°rio sem imagem superior, passwordrecovery e resetpassword nao funcionam.

2024-03-27
      # Revis√£o de seguran√ßa e performance: app + db
      ¬ª Set default schema for DB (user is not working)
      ¬ª Usar users.search_name
      ¬ª Trigger para users colunas 'internal' (de procura/where) e manter email <- lower

2024-03-26
      ¬ª Ajustar no programa o desenvolvido ontem.

2024-03-25
      ¬ª Enviar token pelo email
      ¬ª Check if current_user.authentication, every where and checkout logout, refresh
      ¬ª *Apresenta√ß√£o N 1*, foi boa sem bugs.
      ¬ª Refazer os templates, para ter um em comum com: account.html + displayForm
      ¬ª Recriar os usu√°rios do DB para ter:
         1. um super usu√°rio caatinga_power
         2. um grupo: caatinga_users
         3. um usu√°rio para ser connection string
         4. desenvolvedores: mauro + miguel
         5. as permiss√µes concentradas em caatinga_users
      ¬ª Trazer os schemas AdaptaBrasil para o nosso banco.
      ¬ª Criar indices unique
      ¬ª Criar vw_texts para a UI
      ¬ª Novas colunas para user: last_password_date, created_at, active e real_name (To display => username)


2024-03-23
      #Login, Registro, Recuperar Senha, ChangePassword e ResetPassword OK! Inicio de /index
      ¬ª Renomear forms do processo de recupera√ß√£o de senha (seguir padr√£o internacional)
         - getusermail -> passwordrecovery
         - changepassword<token> -> resetpassword/<token>
         - changepassword -> changepassword
      ¬ª Criar index com menu *muito* simples:
         - mudar senha
         - importar
         - disclaimer
         - Sobre
         - Sair/Logout
      ¬ª Formul√°rios prontos:
        o Sem logar
         - /register
         - /login
         - /passwordrecovery
         - /resetpassword/<token> (de email)
        o Logado
         - /changepassword
         - /logout
         - importar

2024-03-22
      #Login, Registro, Recuperar Senha e ChangePassword (com e sem token) UI funcionando. Loga e desloga.
      ¬ª Geral em todos os formul√°rios de autentica√ß√£o
      ¬ª Revis√£o no wtforms de accounts
      ¬ª Novo mgsSuccess ('contrario do msgError'): mostra uma mensagem e so um bot√£o (com link)
      ¬ª Registro Ok
      ¬ª Login ok
      ¬ª Logout OK
      ¬ª Change password quando logado, ok
      ¬ª getuseremail.html -> requestemail.html


2024-03-21
      #Login, Registro, Recuperar Senha e ChangePassword funcionando na UI, mas falta ChangePassword com Token
      ¬ª ChangePassword, fazer token opcional e novo algoritmo (com get/post)
      ¬ª ChangePassword.html com token n√£o tem form :-O,  sim token, OK

2024-03-20
   #Login, Registro, Recuperar Senha funcionando na UI (falta changepassword.html)
       ¬ª Registro: [ ] Li e ...
       ¬ª getuseremail.html
       ¬ª msg -> msgError

   #Ajustes, mas changepassword.html ainda n√£o tem 'back form'

2024-03-19
   #new template `documentDisplay.html` & refactoring.
    ¬ª Vis√£o geral, documentDisplay.html
   #Login e Registro funcionando na UI (falta [x] Li Termos)
    ¬ª Avoid print shadow document.css
    ¬ª Create authentication template
    ¬ª After login display new "window", import?


# Historical TODO: fix 2025.03.19 (one year later)
TODO:

    # TODO do a Proxy func for sep
    - [Nenhum] to ui_texts
    - Menu to DB
    - sep_edit detected if form's input changed (don't update)
    - mudar erro 500
    - Menu responsive
    - remove pixel.css (simply css's)


    Todo:
        - schema/sep management
        - err_code <- js_ui_dictionary
        - fix data_validate html/css
        - add_msg_fatal template



    2024-09-
        a. Œ≤ 2.17
        b. sent email with errors
        c. replace db_helper.persist_record with Users.update
        d. if template not ready use Error Template
        e. Always send Success & Error message to forms, if error -> alert -> close -> [!] -> display again
        f. Standardize css class names as my-class-name
        0. About title
        1. Œ≤ 2.17
        2. Set User Name in e-mail
        3. Wait for process on forms.
        4. Require actual/current pw to be able to change pw, changepassword user `timer`
        5. Install on Windows server with Hunspell
        6. Add exception message to the forms (alert)
        7. Test error on authentication process: error on start (no Form)
        7. Avoid user's simultaneous validation
        8. <form action="{{ url_for('handle_click') }}" method="post/get"><button type="submit">Go to Other Location</button></form> instead of href=
        9. Œ≤ 2.17
        A. User's information UI
        B. Standardize ui messages with db (eg password_*)
        C. password_recovery, align left form text
        D. The recipient of the email must be different from CC (and perhaps from BCC as well)
        E. Œ≤ 2.17
        F. Œ≤ 2.17
        G. Œ≤ 2.11
        H. try_get_mgd_msg -> create [^|f(msg_code, ar1, arg2)default msg|^] -> search 'msg_code' in ui_texts
        I. One close button for: document.html.j2, dialog.html.j2, form.html.j2 (2024.11.19)
        J. PrivateDocs for About (2024.11.19)


    ## Small Tasks ##
        - init_form_vars create a 'error tmpl'
        - check use o form-main-btn in *.j2
        - share jinja_cache templates + texts (see route_helper templates_found)
        - Login Remember not always working
        - Tmpl for error Internal Error
        - Display colors
        - Smart menu (always, modified)
        - Share form..htm.j2 and document.htm.j2 main button

    ## Possible Bugs ##
        - Check if logged_user.sep is None (occurring now 2025.06.01)

